<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Glassmorphism Data Tracker</title>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: rgba(255,255,255,0.7);
        backdrop-filter: blur(10px);
        margin: 0;
        padding: 20px;
        transition: 0.3s;
        color: #000;
    }
    body.dark {
        background: rgba(0,0,0,0.6);
        color: #fff;
    }
    .container {
        max-width: 900px;
        margin: auto;
        background: rgba(255,255,255,0.25);
        backdrop-filter: blur(20px);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 4px 30px rgba(0,0,0,0.1);
    }
    body.dark .container {
        background: rgba(0,0,0,0.3);
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    .form-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 15px;
    }
    input, button {
        padding: 10px;
        border: none;
        border-radius: 8px;
        outline: none;
    }
    input {
        flex: 1;
        background: rgba(255,255,255,0.4);
        backdrop-filter: blur(10px);
    }
    body.dark input {
        background: rgba(0,0,0,0.4);
        color: white;
    }
    button {
        cursor: pointer;
        background: #007bff;
        color: white;
        font-weight: bold;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    th, td {
        padding: 10px;
        border-bottom: 1px solid rgba(255,255,255,0.2);
        text-align: left;
    }
    th {
        background: rgba(255,255,255,0.3);
    }
    body.dark th {
        background: rgba(0,0,0,0.3);
    }
    .actions button {
        background: #28a745;
        margin-right: 5px;
    }
    .actions button.delete {
        background: #dc3545;
    }
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>Data Tracker</h1>
    <div class="top-bar">
        <input type="text" id="search" placeholder="Cari nama...">
        <button onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
        <button onclick="downloadCSV()">üì• Download CSV</button>
    </div>
    <div class="form-group">
        <input type="text" id="nama" placeholder="Nama">
        <input type="number" id="poin" placeholder="Poin">
        <input type="date" id="tanggal">
        <input type="text" id="kegiatan" placeholder="Kegiatan">
        <button onclick="addData()">Tambah</button>
    </div>
    <table id="dataTable">
        <thead>
            <tr>
                <th>Nama</th>
                <th>Poin</th>
                <th>Tanggal</th>
                <th>Kegiatan</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
let data = [];

function addData() {
    const nama = document.getElementById('nama').value;
    const poin = document.getElementById('poin').value;
    const tanggal = document.getElementById('tanggal').value;
    const kegiatan = document.getElementById('kegiatan').value;
    
    if (!nama || !poin || !tanggal || !kegiatan) return alert("Semua field harus diisi!");

    data.push({ nama, poin, tanggal, kegiatan });
    renderTable();
    clearForm();
}

function clearForm() {
    document.getElementById('nama').value = '';
    document.getElementById('poin').value = '';
    document.getElementById('tanggal').value = '';
    document.getElementById('kegiatan').value = '';
}

function renderTable() {
    const tbody = document.querySelector('#dataTable tbody');
    tbody.innerHTML = '';
    const searchTerm = document.getElementById('search').value.toLowerCase();

    data
    .filter(d => d.nama.toLowerCase().includes(searchTerm))
    .forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td contenteditable="true" oninput="editData(${index}, 'nama', this.innerText)">${item.nama}</td>
            <td contenteditable="true" oninput="editData(${index}, 'poin', this.innerText)">${item.poin}</td>
            <td contenteditable="true" oninput="editData(${index}, 'tanggal', this.innerText)">${item.tanggal}</td>
            <td contenteditable="true" oninput="editData(${index}, 'kegiatan', this.innerText)">${item.kegiatan}</td>
            <td class="actions">
                <button class="delete" onclick="deleteData(${index})">Hapus</button>
            </td>
        `;
        tbody.appendChild(row);
    });
}

function editData(index, key, value) {
    data[index][key] = value;
}

function deleteData(index) {
    data.splice(index, 1);
    renderTable();
}

function toggleTheme() {
    document.body.classList.toggle('dark');
}

function downloadCSV() {
    let csvContent = "data:text/csv;charset=utf-8," 
        + ["Nama,Poin,Tanggal,Kegiatan", ...data.map(d => `${d.nama},${d.poin},${d.tanggal},${d.kegiatan}`)].join("\n");
    const encodedUri = encodeURI(csvContent);
    const link = document.createElement("a");
    link.setAttribute("href", encodedUri);
    link.setAttribute("download", "data.csv");
    document.body.appendChild(link);
    link.click();
}

document.getElementById('search').addEventListener('input', renderTable);
</script>

</body>
</html>
